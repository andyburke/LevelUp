(function(a){a.fn.toggleLoading=function(b){var c,d={dim:2/3,width:42,height:42,opacity:3/4,background:"light",imagesFolder:"../images",speed:75};if(b){a.extend(d,b);if(d.dim===false){d.dim=""}}c=d.imagesFolder+"/"+(d.background==="dark"?"spinner-white.png":"spinner.png");return this.each(function(){var b=a(this),e=b.children(),f=b.data("loading");if(!f){b.data("loading",{spinner:a(document.createElement("div")).css({position:"absolute","z-index":1,width:d.width,height:d.height,opacity:d.opacity,"background-image":"url("+c+")"}).addClass("spinner").insertBefore(this),interval:setInterval(function(){f.spinner.css({"background-position-y":parseInt(f.spinner.css("background-position-y"),10)-d.height})},d.speed)});e.css("opacity",d.dim);f=b.data("loading");a(window).resize(function(){f.spinner.css({top:b.position().top+b.height()/2-d.height/2,left:b.position().left+b.width()/2-d.width/2})}).resize()}else{f.spinner.remove();clearInterval(f.interval);e.css("opacity","");b.removeData("loading")}return this})}})(jQuery)